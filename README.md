# TestApp

Пример кода и структуры типового проекта  
На основе очень простого проекта, сделанного на скорую руку

#### Стек
- React-Native( CLI ) v71
- React-Navigation v6
- Redux
- Redux-Saga
- Lottie
- WebView

#### Что делает
- При запуске отображает сплешскрин, который по итогу загрузки JS-кода становится анимированным( lottie-анимация )
- Посредством API получает список новостей RT по RSS в формате xml
- Первый экран - список всех новостей
- Список новостей поддерживает [Pull-to-refresh](https://facebook.github.io/react-native/docs/refreshcontrol)
- При клике на любую новость из списка, открывается страница подробного просмотра выбранной новости
    - Заголовок новости - заголовок экрана
    - Содержание новости отображается в WebView
    - Пока новость загружается, отображается lottie-анимация

#### Установка и запуск
- ```sh
    $ git clone https://github.com/mastersam92/testApp.git && cd ./testApp
    $ yarn && cd ios && pod install && cd ..
    $ react-native run-ios
    ```

#### Обзор структуры проекта и почему именно так
- **babel.config.js** - прописаны алиасы основных каталогов во избежание адресации вида ```../../components/SomeComponent```  
    Обычно это **src/название_алиаса_без_спецсимволов**
    - **:assets** - "статика"
    - **:imageAssets** - изображения. Обычно находится по адресу **:assets/images**
    - **:global** - любые JS-файлы, доступ к которым предполагается из любой точки проекта
    - **:modules** - модули
    - **:module_app** - модуль, обеспечивающий общий функционал приложения
    - **:module_news** - модуль, обеспечивающий функционал, связанный с новостями
    - **:navigation** - параметры и настройки системы навигации
    - **:components** - многократно исползуемые компоненты
    - **:scenes** - все экраны/сцены приложения
- **src** - каталог для исходников( JS ). Содержит:
    + **assets** - доступен по алиасу **:assets**. Содержит статику, распределенную по каталогам( **images** для изображений, **fonts** для шрифтов итд )
    + **components** - доступен по алиасу **:components**. Содержит частоиспользуемые компоненты, либо те, которые могут часто применяться в дальнейшем для более чем 1 экрана
    + **global** - доступен по алиасу **:global**. Содержит основные глобальные для проекта данные.  
    Обычно содержит как минимум:
        - **api** - помощник для работы с запросами к API
        - **colors** - реестр цветов приложения( во избежание хардкода для каждого экрана и компонента )
        - **constants** - общие константы для приложения. Например, текущая версия ОС и разрешение экрана
        - **endpoints** - адреса, связанные с обращением к API во избежание их хардкода
        - **layout** - содержит функции и константы для перечета размеров элементов под разные разрешения( от телефонов и до планшетов ) для достижения отображения на разных устройствах, максимально близкого к исходным дизайнам ( т.к дизайн обычно рисуется под конкретное устройство с конкретным размером экрана и соотношением сторон, но выглядеть приемлемо должен на разных экранах )
        - **routeNames** - имена конкретных путей навигации для навигации по ним( во избежание хардкода по всему проекту )
        - **images** - подключенные и экспортированные все имеющиеся в приложении изображения во избежание хардкода и первого запроса изображений прямо посреди компонента/экрана
    + **modules** - доступен по алиасу **:modules**. Содержит модули, связанные с работой с т.н сайд-эффектами. Т.к обычно взаимодействие различно по смыслу и логике,
    разные логически отдельные блоки превращаются в отдельные модули( т.е общая работа приложения, авторизация, новости, аренда, чат, итд ).  
    Каждый модуль - отдельный каталог в **modules**, содержащий необходимое для работы с сайд-эффектами в рамках своей логики.  
    Название модуля - название его каталога, отражает его "зону ответственности"( app, auth, user, news, chat )    
    Имеет типовую структуру:
        - **actionTypes** - набор типовых событий конкретного модуля
        - **actionCreators** - генераторы событий конкретного модуля, используют данные из **actionTypes**
        - **reducer** - редьюсер конкретного модуля. Обычно имеет минимум одно поле - **isLoading**
        - **sagas** - саги конкретного модуля
        - обычно каждый модуль имеет свой личный алиас, указывающий на его каталог( например **:module_app** и **:module_news** )
        - Принципиальное отличие между модулем **app** и остальными в том, что его работа сказывается на приложение в целом. К примеру, флаг **isLoading** модуля **app**, когда он **true**, переводит все приложение в режим загрузки( т.е экран становится серым и появляется индикатор загрузки. Какое-либо взаимодействие пользователя с приложением в этотм момент недоступно. Сама система "глобальной загрузки" убрана для небольшого упрощения структуры тестового приложения )  
        Флаг **isLoading** остальных модулей, сигнализирует лишь о совершении конкретным модулем какой-либо работы, что позволяет, к примеру, отображать индикатор загрузки новостей, когда пользователь делает Pull-To-Refresh и список новостей начинает обновляться, т.е это не то действие, которое требует полного "залипания" приложения.  
        Т.к функционал тестового приложения очень прост, все можно было уместить в модуль **app**.  
        Отдельный модуль **news** для одного-единственного запроса к API был сделан для наглядности общей структуры и подхода.
    + **navigation** - доступен по алиасу **:navigation**. Содержит основной функционал навигации
    + **reducer** - осщуествляет подключение всех редьюсеров и саг в приложении( Создан новый модуль ? -Надо прописать его в reducer.js и sagas.js )
    + **scenes** - доступен по алиасу **:scenes**. Содержит сцены("экраны") приложения
        - 1 каталог - 1 экран
        - Во избежание путанницы, название должно быть аналогично указанному в **global/routeNames**, но с заглавной буквы, т.к экспортируется все-таки класс/метод
        - **index.js** - RN класс/функция
        - **styles.js** - стили для класса
        - ( опционально ) **components** - каталог. Содержит компоненты, используемые исключительно для текущего экрана
        - Во избежание захламления основного компонента экрана, часто используемые и массивные участки выносятся в отдельные компоненты
        - Во избежание захламнения каталога экрана, внутренние компоненты выносятся во внутренний каталог **components**
    + Вынесенные в отдельные файлы компоненты как глобальные **src/components** ( **:components** ),
    так и локальные **src/scenes/НазваниеСцены/components**, могут быть либо каталогом с файлами, либо - одноименным js файлом по правилу:
        - Массивные компоненты, содержащие много кода и стилей:  
        **НазваниеКомпонента**( каталог ), содержит:
            + **index.js**
            + **styles.js**
        - Простые компоненты, содержащие мизерные количества кода/стилей:
            + **НазваниеКомпонента.js**
